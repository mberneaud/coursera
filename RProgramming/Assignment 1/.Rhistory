install.packages(XML2R)
library(XML2R)
library(ggplot2)
install.packages("XML2R")
library(XML2R)
file <- "http://stats.oecd.org/restsdmx/sdmx.ashx/GetData/TIVA2015_C1/EXGR+EXGR_FNL+EXGR_INT+EXGR_DVA+EXGR_DDC+EXGR_IDC+EXGR_RIM+EXGR_FVA+IMGR+IMGR_FNL+IMGR_INT+BALGR+REII+PROD+VALU+FFD_DVA+DFD_FVA+BALVAFD+FD_VA+CONS_VA+GFCF_VA+EXGR_DVASH+EXGR_FVASH+EXGR_DVAFXSH+EXGR_FNLDVASH+EXGR_INTDVASH+EXGR_INTDVAPSH+EXGRPSH+EXGR_DVAPSH+EXGR_TDVAIND+EXGR_TFVAIND+EXGR_SERV_DVASH+EXGR_SERV_FVASH+IMGRINT_REII+IMGRPSH+FFD_DVAPSH+DFD_FVAPSH+VALUX_FFDDVA+PROD_VASH+FD_VASH+CONS_VASH+GFCF_VASH.AUS+AUT+BEL+CAN+CHL+CZE+DNK+EST+FIN+FRA+DEU+GRC+HUN+ISL+IRL+ISR+ITA+JPN+KOR+LUX+MEX+NLD+NZL+NOR+POL+PRT+SVK+SVN+ESP+SWE+CHE+TUR+GBR+USA+ARG+BRA+BRN+BGR+KHM+CHN+COL+CRI+HRV+CYP+HKG+IND+IDN+LVA+LTU+MYS+MLT+PHL+ROU+RUS+SAU+SGP+ZAF+TWN+THA+TUN+VNM+ROW.WOR+OECD+AUS+AUT+BEL+CAN+CHL+CZE+DNK+EST+FIN+FRA+DEU+GRC+HUN+ISL+IRL+ISR+ITA+JPN+KOR+LUX+MEX+NLD+NZL+NOR+POL+PRT+SVK+SVN+ESP+SWE+CHE+TUR+GBR+USA+NONOECD+ARG+BRA+BRN+BGR+KHM+CHN+COL+CRI+HRV+CYP+HKG+IND+IDN+LVA+LTU+MYS+MLT+PHL+ROU+RUS+SAU+SGP+ZAF+TWN+THA+TUN+VNM+ROW+APEC+ASEAN+EASIA+EU15+EU28+EU13+EA18+EA12+NAFTA+ZEUR+ZASI+ZSCA+ZOTH+DXD.CTOTAL+C01T05+C10T14+C15T37+C15T16+C17T19+C20T22+C20+C21T22+C23T26+C23+C24+C25+C26+C27T28+C27+C28+C29+C30T33+C30T33X+C31+C34T35+C34+C35+C36T37+C40T41+C45+C50T74+C50T55+C50T52+C55+C60T64+C60T63+C64+C65T67+C70T74+C70+C71+C72+C73T74+C75T95+C75+C80+C85+C90T93+C95+C10T41+C45T95+C50T95+C50T64+C65T74/all?startTime=1995&endTime=2011"
file
library(XML2R)
file <- "http://stats.oecd.org/restsdmx/sdmx.ashx/GetData/TIVA2015_C1/EXGR+EXGR_FNL+EXGR_INT+EXGR_DVA+EXGR_DDC+EXGR_IDC+EXGR_RIM+EXGR_FVA+IMGR+IMGR_FNL+IMGR_INT+BALGR+REII+PROD+VALU+FFD_DVA+DFD_FVA+BALVAFD+FD_VA+CONS_VA+GFCF_VA+EXGR_DVASH+EXGR_FVASH+EXGR_DVAFXSH+EXGR_FNLDVASH+EXGR_INTDVASH+EXGR_INTDVAPSH+EXGRPSH+EXGR_DVAPSH+EXGR_TDVAIND+EXGR_TFVAIND+EXGR_SERV_DVASH+EXGR_SERV_FVASH+IMGRINT_REII+IMGRPSH+FFD_DVAPSH+DFD_FVAPSH+VALUX_FFDDVA+PROD_VASH+FD_VASH+CONS_VASH+GFCF_VASH.AUS+AUT+BEL+CAN+CHL+CZE+DNK+EST+FIN+FRA+DEU+GRC+HUN+ISL+IRL+ISR+ITA+JPN+KOR+LUX+MEX+NLD+NZL+NOR+POL+PRT+SVK+SVN+ESP+SWE+CHE+TUR+GBR+USA+ARG+BRA+BRN+BGR+KHM+CHN+COL+CRI+HRV+CYP+HKG+IND+IDN+LVA+LTU+MYS+MLT+PHL+ROU+RUS+SAU+SGP+ZAF+TWN+THA+TUN+VNM+ROW.WOR+OECD+AUS+AUT+BEL+CAN+CHL+CZE+DNK+EST+FIN+FRA+DEU+GRC+HUN+ISL+IRL+ISR+ITA+JPN+KOR+LUX+MEX+NLD+NZL+NOR+POL+PRT+SVK+SVN+ESP+SWE+CHE+TUR+GBR+USA+NONOECD+ARG+BRA+BRN+BGR+KHM+CHN+COL+CRI+HRV+CYP+HKG+IND+IDN+LVA+LTU+MYS+MLT+PHL+ROU+RUS+SAU+SGP+ZAF+TWN+THA+TUN+VNM+ROW+APEC+ASEAN+EASIA+EU15+EU28+EU13+EA18+EA12+NAFTA+ZEUR+ZASI+ZSCA+ZOTH+DXD.CTOTAL+C01T05+C10T14+C15T37+C15T16+C17T19+C20T22+C20+C21T22+C23T26+C23+C24+C25+C26+C27T28+C27+C28+C29+C30T33+C30T33X+C31+C34T35+C34+C35+C36T37+C40T41+C45+C50T74+C50T55+C50T52+C55+C60T64+C60T63+C64+C65T67+C70T74+C70+C71+C72+C73T74+C75T95+C75+C80+C85+C90T93+C95+C10T41+C45T95+C50T95+C50T64+C65T74/all?startTime=1995&endTime=2011"
install.packages("WDI")
setwd("/home/malte/Git/datasciencecoursera/RProgramming/Assignment 1")
source("complete.R")
complete("specdata", c(2, 4, 8, 10, 12))
source("complete.R")
complete("specdata", 1)
source("complete.R")
complete("specdata", c(2, 4, 8, 10, 12))
complete("specdata", 30:25)
source("complete.R")
complete("specdata", 1)
complete("specdata", c(2, 4, 8, 10, 12))
complete("specdata", 30:25)
complete("specdata", 3)
source("complete.R")
complete("specdata", c(2, 4, 8, 10, 12))
source("complete.R")
df <-  complete("specdata")
View(df)
View(df)
View(df)
View(df)
valid.ids <- df$ID[nobs > threshold]
threshold <- 150
valid.ids <- df$ID[nobs > threshold]
valid.ids <- df[, 2][nobs > threshold]
valid.ids <- c(df[, 2][nobs > threshold])
nobs2 <- df$nobs
valid.ids <- df$ID[nobs2 > threshold]
valid.ids
valid.ids <- c(df$nobs > threshold)
corr.vector <- c(NULL)
files <- list.files(directory)
file.paths <- paste(directory, files, sep="/")
directory <- "specdata"
files <- list.files(directory)
file.paths <- paste(directory, files, sep="/")
used.file <- read.csv(file.paths[1], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
used.file <- read.csv(file.paths[2], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
used.file <- read.csv(file.paths[3], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
valid.ids[3]
corr.vector <- c(corr.vector, NULL)
corr.vector
corr <- function(directory, threshold = 0) {
# creating string with "directory/filename" for loop later
files <- list.files(directory)
file.paths <- paste(directory, files, sep="/")
# data frame with complete cases and valid id selector
df <- complete(directory)
valid.ids <- c(df$nobs > threshold)
# creating correlation vector to be filled in loop
corr.vector <- c(NULL)
for(i in id) {
if(valid.ids[i] == TRUE) { ## reads file and adds cor to corr.vector
used.file <- read.csv(file.paths[i], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
} else { ## appends "NULL" to corr.vector if complete.obs < 150
corr.vector <- c(corr.vector, NULL)
}
} corr.vector
}
corr <- function(directory, threshold = 0) {
# creating string with "directory/filename" for loop later
files <- list.files(directory)
file.paths <- paste(directory, files, sep="/")
# data frame with complete cases and valid id selector
df <- complete(directory)
valid.ids <- c(df$nobs > threshold)
# creating correlation vector to be filled in loop
corr.vector <- c(NULL)
for(i in id) {
if(valid.ids[i] == TRUE) { ## reads file and adds cor to corr.vector
used.file <- read.csv(file.paths[i], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
} else { ## appends "NULL" to corr.vector if complete.obs < 150
corr.vector <- c(corr.vector, NULL)
}
corr.vector
}
corr <- function(directory, threshold = 0) {
# creating string with "directory/filename" for loop later
files <- list.files(directory)
file.paths <- paste(directory, files, sep="/")
# data frame with complete cases and valid id selector
df <- complete(directory)
valid.ids <- c(df$nobs > threshold)
# creating correlation vector to be filled in loop
corr.vector <- c(NULL)
for(i in id) {
if(valid.ids[i] == TRUE) { ## reads file and adds cor to corr.vector
used.file <- read.csv(file.paths[i], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
} else { ## appends "NULL" to corr.vector if complete.obs < 150
corr.vector <- c(corr.vector, NULL)
}
corr.vector
}
corr <- function(directory, threshold = 0) {
# creating string with "directory/filename" for loop later
files <- list.files(directory)
file.paths <- paste(directory, files, sep="/")
# data frame with complete cases and valid id selector
df <- complete(directory)
valid.ids <- c(df$nobs > threshold)
# creating correlation vector to be filled in loop
corr.vector <- c(NULL)
for(i in id) {
if(valid.ids[i] == TRUE) { ## reads file and adds cor to corr.vector
used.file <- read.csv(file.paths[i], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
} else { ## appends "NULL" to corr.vector if complete.obs < 150
corr.vector <- c(corr.vector, NULL)
}
corr.vector
}
}
corr <- function(directory, threshold = 0) {
# creating string with "directory/filename" for loop later
files <- list.files(directory)
file.paths <- paste(directory, files, sep="/")
# data frame with complete cases and valid id selector
df <- complete(directory)
valid.ids <- c(df$nobs > threshold)
# creating correlation vector to be filled in loop
corr.vector <- c(NULL)
for(i in id) {
if(valid.ids[i] == TRUE) { ## reads file and adds cor to corr.vector
used.file <- read.csv(file.paths[i], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
} else { ## appends "NULL" to corr.vector if complete.obs < 150
corr.vector <- c(corr.vector, NULL)
}
}
corr.vector
}
source("complete.R")
source("corr.R")
corr <- function(directory, threshold = 0) {
# creating string with "directory/filename" for loop later
files <- list.files(directory)
file.paths <- paste(directory, files, sep="/")
# data frame with complete cases and valid id selector
df <- complete(directory)
valid.ids <- c(df$nobs > threshold)
# creating correlation vector to be filled in loop
corr.vector <- c(NULL)
for(i in id) {
if(valid.ids[i] == TRUE) { ## reads file and adds cor to corr.vector
used.file <- read.csv(file.paths[i], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
} else { ## appends "NULL" to corr.vector if complete.obs < 150
corr.vector <- c(corr.vector, NULL)
}
}
corr.vector
}
cr <- corr("specdata", 150)
source("corr.R")
cr <- corr("specdata", 150)
df <-  complete("specdata")
valid.ids <- df[, 2][nobs > threshold]
threshold <- 150
valid.ids <- df[, 2][nobs > threshold]
valid.ids <- c(df$nobs > threshold)
valid.ids[1]
valid.ids[2]
valid.ids[3]
length(valid.ids)
if(valid.ids[3] == TRUE) {
used.file <- read.csv(file.paths[3], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
} else {
corr.vector <- c(corr.vector, NULL)
}
files <- list.files(directory)
files.index <- as.factor(files)
file.paths <- paste(directory, files, sep="/")
directory <- "specdata"
files <- list.files(directory)
files.index <- as.factor(files)
file.paths <- paste(directory, files, sep="/")
corr.vector <- c(NULL)
valid.ids <- c(df$nobs > threshold)
valid.ids[3]
used.file <- read.csv(file.paths[3], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
valid.ids[1]
corr.vector <- c(corr.vector, NULL)
valid.ids[2]
used.file <- read.csv(file.paths[2], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
valid.ids[3]
used.file <- read.csv(file.paths[3], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
valid.ids[4]
used.file <- read.csv(file.paths[3], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
valid.ids[5]
used.file <- read.csv(file.paths[3], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
valid.ids[6]
used.file <- read.csv(file.paths[3], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
valid.ids[7]
used.file <- read.csv(file.paths[3], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
valid.ids[8]
used.file <- read.csv(file.paths[3], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
valid.ids[9]
used.file <- read.csv(file.paths[3], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
valid.ids[10]
corr.vector <- c(corr.vector, NULL)
corr <- function(directory, threshold = 0) {
# creating string with "directory/filename" for loop later
files <- list.files(directory)
file.paths <- paste(directory, files, sep="/")
# data frame with complete cases and valid id selector
df <- complete(directory)
valid.ids <- c(df$nobs > threshold)
# creating correlation vector to be filled in loop
corr.vector <- c(NULL)
for(i in valid.ids) {
if(valid.ids[i] == TRUE) { ## reads file and adds cor to corr.vector
used.file <- read.csv(file.paths[i], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
} else { ## appends "NULL" to corr.vector if complete.obs < 150
corr.vector <- c(corr.vector, NULL)
}
}
corr.vector
}
cr <- corr("specdata", 150)
(valid.ids[1] == TRUE)
(valid.ids[2] == TRUE)
summary(valid.ids)
corr <- function(directory, threshold = 0) {
# creating string with "directory/filename" for loop later
files <- list.files(directory)
file.paths <- paste(directory, files, sep="/")
# data frame with complete cases and valid id selector
df <- complete(directory)
valid.ids <- c(df$nobs > threshold)
# creating correlation vector to be filled in loop
corr.vector <- c(NULL)
for(i in 1:332) {
if(valid.ids[i] == TRUE) { ## reads file and adds cor to corr.vector
used.file <- read.csv(file.paths[i], header = T)
corr.file <- cor(used.file$sulfate, used.file$nitrate, use = "complete.obs")
corr.vector <- c(corr.vector, corr.file)
} else { ## appends "NULL" to corr.vector if complete.obs < 150
corr.vector <- c(corr.vector, NULL)
}
}
corr.vector
}
cr <- corr("specdata", 150)
summary(cr)
head(cr)
source("complete.R")
source("corr.R")
cr <- corr("specdata", 150)
head(cr)
summary(cr)
cr <- corr("specdata", 400)
head(cr)
summary(cr)
summary(cr)
cr <- corr("specdata", 5000)
summary(cr)
length(cr)
source("complete.R")
source("corr.R")
cr <- corr("specdata", 150)
cr <- corr("specdata", 5000)
summary(cr)
length(cr)
source("complete.R")
source("corr.R")
cr <- corr("specdata", 5000)
summary(cr)
length(cr)
cr <- corr("specdata", 150)
head(cr)
summary(cr)
source("complete.R")
source("corr.R")
cr <- corr("specdata", 150)
files <- list.files(directory)
directory <- "specdata"
files <- list.files(directory)
source("complete.R")
source("complete.R")
source("corr.R")
cr <- corr("specdata", 150)
source("complete.R")
source("corr.R")
cr <- corr("specdata", 150)
head(cr)
summary(cr)
cr <- corr("specdata", 5000)
summary(cr)
length(cr)
